---
title: "societiesnetwork"
author: "George Oberle"
date: "December 5, 2014"
output: html_document
---

<b><i>Introduction</i></b>

The founders and the leaders in the early republic worried incessantly over the idea of decline in the republic and they recognized that the expansion of democracy and virtue relied on the enhancement of newly developing information networks in order to fashion a well-informed citizenry. The first half-century following the founding was a period when people, and the politicians that represented them, debated the importance of different revolutionary changes in the way people lived, interacted, and framed their understanding of the world. Historians have traditionally focused on these changes by focusing on the revolutionary changes in politics and in the marketplace. There is growing evidence however, that by studying the way people understood the impact of the new information systems that were being developed in the midst of the information revolution during this period we can better understand the ideological distinctions between different political actors. Therefore examining learned societies and other knowledge institutions could serve as a means to view connections and divisions between people. 

Understanding the fundamental purpose of the learned society as a means of disseminating information with its membership helps to explain the expansive nature of discourse in early America. Because people gathered together to discuss new ideas in many diverse settings, the groups became vibrant and effective ways to spread knowledge. In other words, the early learned societies can be considered what modern day historians call "information systems." For example, Historian A. Hunter Dupree writes, “…the business of the learned society was in the late eighteenth century, and has remained, the gathering, processing, and dissemination of information.”  On some levels there was a transatlantic discourse occurring prior to the formation of these learned societies, but it was not until these formal systems were created that information systems could be formed, standardized, and diffused over vast and diverse spaces. 

The emergence of early learned societies represented a revolution in knowledge, a new way of organizing and transmitting knowledge. This information revolution was analogous to the political and market revolutions of the eighteenth and nineteenth centuries. Daniel Headrick argues that this information revolution has been taken for granted and has not been explored nearly as extensively as the Enlightenment that preceded it. The expanding demand for information was fulfilled by an ever-expanding supply of information. The consumers for this new information included the traditional elite individual, government officials and military officers, as well as a growing number of professionals with a need for specialized information. They in turn created new information and fed into an expanding information cycle. Further, there was a dramatic growth of population, production, and trade. Lastly, Headrick points out that we should “…not forget curiosity. This period saw a substantial increase in the number of educated people,…who judged one another by their conversations, their wit, their knowledge of the world and the latest news.”   Information possessed a social and cultural power to those that had access to the right information. Headrick’s work shows that the development of a diverse range of information systems helped to lay a foundation for a diverse information environment.

<i>The Data Visualization Project</i>
Learned societies have offered excellent sources for scholars to study the development of science and political culture. There is nothing new about studying them. Typically when scholars turn their attention to learned societies and other groups their focus naturally turns to the leadership of those associations and the work they conducted. This focus is natural since they offer the prevalence of evidence for scholars to evaluate. These sources do an excellent job describing the work of the institution and particular aspects of the interests of members. These works also suggest that scientific discourse, and the creation and dissemination of knowledge itself, is fixated in a tradition that is fundamentally a political endeavor and thus became politicized. This is exemplified by Linda Kerber’s comparison of the published papers of the American Academy of Arts and Sciences (AAAS) and the American Philosophical Society (APS) that asserted the AAAS stressed mathematical and astronomical studies while the APS focused on descriptive sciences of botany, geology and the like. Other scholars have suggested that scientific societies had much in common and that the differences between the two groups owed much more to the interests in their life and the accidents of death of the membership in the societies. 

These scholars both have excellent claims to support their scholarship however after carefully examining these groups there remains no resolution to these issues despite the fact that thirty years has passed since Green’s book was published. Typically, historians view learned societies as the dominion of the elite and the gentleman scholar however these societies are representative of a pattern of engagement in civil society. Alexis Tocqueville observed that “Americans of all ages, of all conditions, of all minds, constantly unite…” in order to “create hospitals, prisons, schools…” and “bringing a truth to light or of developing a sentiment with the support of a good example, they associate.” The freedom to associate with like-minded people offered opportunities for citizens to create networks of interests that bound people together in a web of interrelated interests. These relationships served as a means to bind a new republic together and ironically, these connections led to greater awareness of other differences between citizens in the republic. Despite the abundance of sources, these relationships remain difficult to document due to the paucity of direct evidence linking people across different groups. Adding new computational methods into Clio’s toolbox may offer historians new insights using previously underutilized resources.

<i>Sources and Methods</i>


```{r}
#Load tools
library (sp)
library (rgdal)
library (rgeos)
library (maptools)
library (ggmap)
library (ggplot2)
library (mullenMisc)
library (magrittr)
library (stringr)
library (dplyr)
library (RColorBrewer)
library (igraph)

```

It seemed appropriate to start evaluating membership rolls using the American Philosophical Society (APS) and the American Academy of Arts and Sciences (AAAS).  The APS, founded in Philadelphia, is the oldest learned society established in 1743 by Benjamin Franklin however the society experienced several setbacks. Beginning in 1768 there is a reliable list of elected members available by year at the APS website. The data available consists of five fields:
Name:  	Thomas Bacon
 			Year Elected:  1768
 			Residency:  	Resident
 			Living? :  	Deceased
 			Death Date:  	5/24/1768

All of these fields are fairly self-explanatory however the residency field required exploration of the rules of the society of the time. An elected member could hold one of two statuses based on the time of election. A resident was a resident of area that became the United States while an International status was anyone that lived outside that region. Over time the membership rolls became more complex however for this study these are the core fields that are relevant. Since there was no digitized list of resources or any way to export the list a new spreadsheet needed to be created using the name, year elected, and residency. Scholars must make choices whether to include all the data available or only parts of it and then explain the choices. In this case the living status and the death date seemed irrelevant to the research questions being asked and would add extra time to prepare the data. Therefore it was not included. 
	The American Academy of Arts and Sciences, founded in Boston, in 1780 by John Adams and other leaders in Massachusetts to promote the diffusion of knowledge. The online book of members is a pdf list of names, arranged by year of election and then alphabetically by last name. Following the name there is a series of dates that indicates the birth year and the death year of the corresponding individual.  There is a separate listing the names of members that are organized by the appropriate subject category for which the member was elected. These are not cross-listed with the main entry and there is no way to differentiate duplicate names in these listings since there is no birth/death dates. As a result this data was not gathered at this time however, it may be useful to add should a relevant project surface. In the end, the three common variables seemed to be name, organization and their common status as member. This became the foundation of developing a network analysis chart. 
The creation of these lists in a spreadsheet takes significant time inputting the data. This process required a quality control check in place to assure that typos and other mistakes were minimized. Since they are both active institutions a cut off decision had to be made. Due to the nature of the original project the cut off date was 1828 since this was Andrew Jackson’s election and clearly outside of the scope of work that Kerber and Green introduced. Evaluating these membership lists was a difficult process without the aid of software due to the large set of names. For example, the American Philosophical Society from 1768-1828 elected 717 members. Likewise, the American Academy of Arts and Sciences, founded in 1780, boasted a membership through 1828 that numbered 432 members. It would be impossible for the scholar to memorize every name on the list and it would be daunting to try to manually calculate graphs that demonstrate statistical patterns or to draw a network graph that examined the overlap of these groups. Ultimately, this makes this sort of data a prime candidate for scholars to use R to help visualize the data gathered from membership rolls.

```{r}
#This is helpful showing the annual membership of the APS and the AAAS. It shows patterns of growth of the members.
socdata = read.csv ("~/societiesnetwork/data/APSAAAScombined.csv")

year <- ggplot(socdata, aes(x=Year.Elected, fill= Organization ))
year + geom_histogram(position = "dodge", binwidth = 1) +
ggtitle("Annual Elected Members of APS and AAAS") + ylab("Total Members Elected") + xlab("Year Elected")
```

This bargraph is a good start to begin an analysis of the annual election patterns of these associations. Upon graphing the annual election data of these two organizations we can see that the AAAS had a few very high spikes in their membership rolls. It is evident upon careful observation of the graph that in the 48 years between the creation of the AAAS and 1828 there were only eight years that they elected more members to their organization then the APS. One was the year of the AAAS founding. Still this graph is difficult to use since there are so many years and because each year requires a bar for the APS and the AAAS. Instead, plotting a line graph may offer a better way to visualize this data.

```{r}
socdata %>%
  group_by(Year.Elected, Organization) %>%
  summarize(n = n())  %>% 
  ggplot(aes(x=Year.Elected, y= n, color = Organization )) +
  geom_line() +
ggtitle("Annual Elected Members of APS and AAAS") + ylab("Total Members Elected") + xlab("Year Elected")
```

With this visualization it is easier to observe that both organizations seem to have similar ebbs and flows in their number of elected members. This may suggest that the growth of the societies may be interrelated.
It is also possible that these groups are reacting to each other and adding members to demonstrate the superiority of their institution over the other. This visualization also provides some opportuities to ask new questions. For example, there is a clear decline in the elected membership of the AAAS from about 1815-1820 while there is an unusual increase in membership of the APS. A possible reason for this could be the decline of the Federalists following the Hartford Convention and their opposition to the War of 1812. There are other suggestions by scholars who point out that American science lagged behind that of the advances of the well-funded and mature institutions in Europe and as a result they suggest that the founders sought to create larger and diversified institutions. 


Interestingly as mentioned earlier the APS divided their membership by residency status as early as 1768 that included international and resident. On the one hand, this indicated that the Philadelphia based society viewed themselves as the primary institution for scientific knowledge in the British colonies, while on the other; the inclusion of the international members provided the institution with additional membership with gravitas. These international members enhanced the credibility of the APS and the authority over the knowledge that it created and diffused across the fledgling nation. 

Using the data in the APS membership file we can create a simple bar graph that shows the number of members by their membership status.

 
```{r}
dataaps <-read.csv("~/societiesnetwork/data/apsmembership.csv")
a <- ggplot(dataaps, aes(x=Year.Elected))
a + geom_histogram(binwidth = 1)+ xlab("Year Elected")+ggtitle ("Annual Total Elected Members APS")
```
analysis here

```{r}
#APS Resident and International Members
a <- ggplot(dataaps, aes(Residency))
a + geom_bar(width=.5, fill="blue", color="darkblue") + coord_flip()+ggtitle ("Total Elected Members APS by Residency 1768-1828")
```

The graph shows that approximately 40% of the membership between 1768 and 1828 were categorized as international members. In addition to other possible meanings a scholar may want to consider that the scientific community in this period was a cosmopolitan group that actively engaged each other in order to promote the diffusion of knowledge.

Despite the fact that the AAAS elected foreign members it is interesting to note that they did not distinguish between this types of residency status. This is curious since the AAAS was founded near the end of the Revolutionary War while the APS practice dates from its founding prior to the outbreak of hostilities. 

Perhaps even more interesting is viewing the APS residency status by annual elections. This chart shows significant increases in the number of international members following the creation of the AAAS. It is unclear if this is directly connected to the establishment and growth of the AAAS however, it offers some new questions to look into and if it is significant then the scholar can invest the time to identify international members elected into the AAAS in order to compare these institutions.

```{r}
dataaps %>%
  group_by(Year.Elected, Residency) %>%
  summarize(n = n())  %>% 
  ggplot(aes(x=Year.Elected, y= n, color = Residency )) +
  geom_line() +
ggtitle("Annual Elected Members of APS by Residency") + ylab("Total Members Elected") + xlab("Year Elected")
```

Another significant observation that scholars can make with with this line graph is that there is a significant decline of international members elected during times of international crises like during the War of 1812.

These charts are very good at showing snaptshots about specific institutions or even some general characteristics shared between institutions however they do not demonstrate if members belonged to both groups



```{r}
socdata %>%
  filter(Year.Elected < 1812) %>%
  graph.data.frame(directed = FALSE) %>%
  plot(vertex.label = NA)
title("APS and AAAS Shared Membership Before 1812")
```

The proceeding membership charts provide useful information about these two specific organizations however they don’t provide a context about the growing number of societies and other knowledge institutions in the early republic. An additional resource to be exploited comes from the <i>Scholarly Societies Project</i>, an online directory of over 4,000 scholarly societies. By harvesting the data gathered by Jim Parrott and maintained by the University of Waterloo Library from 1994-2009, scholars can develop strategies to test analytical methods with a small and reliable data set. This is an important practice before adding more complexity to a historical programming project. Still there seemed to be an increadible growth in these societies as documented by the number of associations documented in the data and by observers at the time like earlier Alexis de Toqueville.

```{r}
early_learned <- read.csv("~/societiesnetwork/data/scholarlysocieties.csv")

type <- ggplot(early_learned, aes (x=Society))
type+ geom_histogram() + theme(axis.text.x = element_text(face = "bold", angle = 60, hjust = 1, size = 8)) +ggtitle("Learned Societies by Type") + ylab("Total Established") + xlab ("Type of Society")

```
Despite the fact that this is an excellent source there are a few challenges. First, the data is housed on multiple webpages and is structured differently on the different pages therefore it is difficult to scrape. Instead, it can be entered manually in a csv file. Second, despite the breadth of the project there are gaps. For example the Agricultural Society of Albemarle was not included in the origninal data of early scholarly socities founded before 1849 in the United States. References to the site and members is found in several sources like in the papers of its first president, and President of the United States, James Madison. I have added this and a few others and I hope that colleagues will work together to add more over time. Therefore the file will be available for edit via github. 

Once the initial datafile is prepared it is helpful to identify some core data elements that may be helpful to use to visualize. In addition to the location there are other helpful elements to use like the Date.Established and the column that defines the type of society that is identified in the Society column. The Society column defines the purpose of the society based on the mission of the society. Agricultural and mechanical socities promoted education and learning that supported practicioners of those arts. The Letters grouping combines those identified as literature or historical in nature. Medical socities supported the growing medical profession. Specialized institutions included specialized scientific societies like the Academy of Natural Sciences or the Chemical Society of Philadelphia.Finally, Universal societies were modeled as institutions that were designed to be wide-ranging and encompass all aspects of knowledge like the APS and the AAAS.

A simple graph of this outlines the growth in these specialized socities below.

```{r}
type <- ggplot(early_learned, aes (x=Society))
type+ geom_histogram() + theme(axis.text.x = element_text(face = "bold", angle = 60, hjust = 1, size = 8)) +ggtitle("Learned Societies by Type") + ylab("Total Established") + xlab ("Type of Society")

```

This chart provides little context or nuance to the observer. Instead, if we include a graph that provides dates we get a much more useful tool.

```{r}
typedate <- ggplot(early_learned, aes (x=Date.Established, fill=Society))
typedate+ geom_histogram(position= "stack", binwidth= 10) + theme(axis.text.x = element_text(face = "bold", angle = 60, hjust = 1, size = 8)) +ggtitle("Learned Societies by Date Established") + ylab("Total Established") + xlab ("Year Established")
```


Once the data is gathered and loaded it became clear that it may be useful to assign geographic coordinates to the site. Google's api can be used to affix these codes however it requires city and state to be in the same column. Using dplyr we can add a column that pasted the data from the seperate City and State columns into a new column called location. Following that we can add this new column back to the original data frame and then run the Google api. Finally we can view the file and save it.


```{r}
#Maps-Scholarly Societies Begin
schol_soc <- read.csv("~/societiesnetwork/data/scholarlysocieties.csv")     
schol_soc<- schol_soc%>%
mutate(location=paste (City, State))
location_geocoded <- geocode(schol_soc$location)
schol_soc_geocoded <- cbind(schol_soc, location_geocoded)
schol_soc_geocoded
write.csv(schol_soc_geocoded, file = "schol-soc-geocoded.csv")

```

Some scholars point out that the expansive distances in the United States encouraged the development of different learned societies. This has been suggested by historians that study the history of science and also many historians of higher education make those points as well. It might be helpful to map this data and also to begin to compare maps between the growth of colleges and those of learned societies, and museums and libraries.

```{r}


```


In order to map the societies it is useful to utilize existing shape files from the NHGIS and to prepare them for use.

```{r}
#Get the Shape files read and make sure that they work using these commands.
map_sp <- readOGR("nhgis-shp/", "state_1840")
class(map_sp)
str(map_sp, max.level = 2)
map_sp@bbox
map_sp@proj4string
head(map_sp@data)
plot(map_sp)

map1840<- readOGR ("nhgis-shp" , "state_1840")
fort2<- fortify (map1840)

```


```{r}

ggplot () + geom_map(data=fort2, map=fort2, aes(x=long, y=lat, group=group, map_id=id), color="grey", fill="white") +geom_point(data=schol_soc_geocoded, size=3, aes (x=lon, y=lat, color=Society) ) + coord_map() +ggtitle('Early American Learned Societies by Type 1768-1848')
```


```{r}
data = read.csv("~/societiesnetwork/data/learnmembabrev.csv")
data_members <- graph.data.frame(data, directed = FALSE)
#plot (data_members)
plot (data_members, vertex.label = NA)
title("A Network Graph of the Societies Involved in the Columbian College")
```

```{r}
V(data_members)
bipartite.mapping(data_members)
V(data_members)$type <- bipartite.mapping(data_members)$type
is.bipartite(data_members)
plot(data_members, layout = layout.bipartite, vertex.label = NA)
title("A bipartite layout of Columbian College Societies")
```

```{r}
full_members <- bipartite.projection(data_members)
#str(full_members)
#plot(full_members$proj1)
#title("Just the people in the Columbian College network")
```


```{r}
V(data_members)
bipartite.mapping(data_members)
V(data_members)$type <- bipartite.mapping(data_members)$type
is.bipartite(data_members)
plot(data_members, layout = layout.bipartite, vertex.label = NA)
title("A bipartite layout of Columbian College Societies")
```


```{r}
plot(full_members$proj2)
title("The Columbian College Network")
```

```{r}
E(full_members$proj2)
E(full_members$proj2)$weight
```

```{r}
plot(full_members$proj2, edge.width = E(full_members$proj2)$weight)
title("Fraternal Organizations Weighted by Shared Membership")
```


```{r}
#plot(full_members$proj2, edge.width = E(full_members$proj2)$weight,
#layout = layout.fruchterman.reingold(full_members$proj2, 
       # weights = E(full_members$proj2)$weight),
     #vertex.label.dist = 1.5)
#title("Columbian College Associations Weighted by Shared Membership")

```



